**1.期望dp**

期望dp通常逆推，即从结果推向初始状态，也可以用记忆化搜索进行dp；

E=Σp1*(E1+X1)+Σp2*(E+X2)

其中E为当前状态的期望，E1为下一个状态的期望，p1和X1分别为将当前状态转移到下一个状态的概率和花费，p2和X2分别为保持当前状态的概率和花费。

最后化简为E=(Σp1*(E1+X1)+Σp2*X2)/(1-Σp2)



**2.概率dp**

概率dp通常顺推，即从初始状态推向结果，E=Σp1*E1

其中E为当前状态的概率，E1为上一个状态的概率，p1是由上一个状态转移到当前状态的概率



  很多概率题总逃不开用dp转移。
           
    期望题总是倒着推过来的，概率是正着推的，多做题就会理解其中的原因     
    有些期望题要用到有关 概率 或 期望的常见公式或思想
    遇到dp转移方程(组)中有环的，多半逃不出高斯消元（手动 和 写代码 两种）
    这套题中还有道树上的dp转移，还用dfs对方程迭代解方程， 真是大开眼界了        
    当然还有与各种算法结合的题，关键还是要学会分析
    当公式或计算时有除法时， 特别要注意分母是否为零
---------------------
<https://blog.csdn.net/qq_34374664/article/details/63254315>



有dp就一定有状态和状态转移，不同的就是概率dp处理的是概率或者期望

<https://hyesuixin.com/2018/07/23/%E6%9C%9F%E6%9C%9Bdp%E5%B0%8F%E7%BB%93/>

<https://blog.csdn.net/nameofcsdn/article/details/52082746>

<https://blog.csdn.net/hyesuixin/article/details/81104772>



概率要顺着推，期望倒着推

其次就是关于概率DP状态的设计，概率DP的题往往设计状态比较直观，直接按照题意来就可以（也有可能是我做的题太水了）。关于状态的转移，其最重要的核心就是严格按照全概率公式和全期望公式来递推，要保证枚举出所有可能的状态，并保证他们是互斥的事件并且概率和为1.

## **总结的规律：**

1.期望可以分解成多个子期望的加权和，权为子期望发生的概率，即 E(aA+bB+…) = aE(A) + bE(B) +…+1； 
2.期望从后往前找，一般dp[n]=0,dp[0]是答案； 
3.解决过程，找出各种情况乘上这种情况发生的概率，求和；



<https://wenku.baidu.com/view/90adb02acfc789eb172dc8a8.html>



概率：到达当前状态的概率等于到达前驱状态的概率乘以到达当前状态的概率，即dp[now]=Σ(dp[pre]*p[pre][now])。

期望：当前状态的期望等于所有{后继状态的输出值（期望）乘以其到达它的概率}之和，



<https://blog.csdn.net/KGV093/article/details/78396214>



期望 DP 一般来说有它固定的模式。 
一种模式是直接 DP，定义状态为到终点期望，根据全期望公式等，通常采用逆序计算得到答案。 
一种模式是利用期望的线性性质，对贡献分别计算，这种模式一般要求我们求出每种代价的期望使用次数，而每种代价往往体现在 DP 的转移之中。 

还有一种模式是可以直接使用期望的定义计算。 

4.一些状态能构成图的期望问题，如果只能列出了线性方程组，可以考虑用高斯消元（O（n^3））解决



<http://www.cnblogs.com/kuangbin/archive/2012/10/02/2710606.html>